import{R as b}from"./index.f27c2642.js";var fe=e=>e.type==="checkbox",se=e=>e instanceof Date,I=e=>e==null;const nr=e=>typeof e=="object";var U=e=>!I(e)&&!Array.isArray(e)&&nr(e)&&!se(e),ar=e=>U(e)&&e.target?fe(e.target)?e.target.checked:e.target.value:e,Er=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ur=(e,t)=>e.has(Er(t)),ae=e=>Array.isArray(e)?e.filter(Boolean):[],C=e=>e===void 0,c=(e,t,r)=>{if(!t||!U(e))return r;const n=ae(t.split(/[,[\].]+?/)).reduce((i,l)=>I(i)?i:i[l],e);return C(n)||n===e?C(e[t])?r:e[t]:n};const ge={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Cr=b.createContext(null),Fe=()=>b.useContext(Cr);var lr=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(i,l,{get:()=>{const f=l;return t._proxyFormState[f]!==K.all&&(t._proxyFormState[f]=!n||K.all),r&&(r[f]=!0),e[f]}});return i},W=e=>U(e)&&!Object.keys(e).length,or=(e,t,r)=>{const{name:n,...i}=e;return W(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!r||K.all))},H=e=>Array.isArray(e)?e:[e],cr=(e,t,r)=>r&&t?e===t:!e||!t||e===t||H(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n)));function be(e){const t=b.useRef(e);t.current=e,b.useEffect(()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function Rr(e){const t=Fe(),{control:r=t.control,disabled:n,name:i,exact:l}=e||{},[f,y]=b.useState(r._formState),_=b.useRef(!0),A=b.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=b.useRef(i);return p.current=i,be({disabled:n,next:D=>_.current&&cr(p.current,D.name,l)&&or(D,A.current)&&y({...r._formState,...D}),subject:r._subjects.state}),b.useEffect(()=>{_.current=!0;const D=r._proxyFormState.isDirty&&r._getDirty();return D!==r._formState.isDirty&&r._subjects.state.next({isDirty:D}),r._updateValid(),()=>{_.current=!1}},[r]),lr(f,r,A.current,!1)}var J=e=>typeof e=="string",fr=(e,t,r,n,i)=>J(e)?(n&&t.watch.add(e),c(r,e,i)):Array.isArray(e)?e.map(l=>(n&&t.watch.add(l),c(r,l))):(n&&(t.watchAll=!0),r),Or=e=>{const t=e.constructor&&e.constructor.prototype;return U(t)&&t.hasOwnProperty("isPrototypeOf")},qe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(qe&&(e instanceof Blob||e instanceof FileList))&&(r||U(e)))if(t=r?[]:{},!Array.isArray(e)&&!Or(e))t=e;else for(const n in e)t[n]=$(e[n]);else return e;return t}function Lr(e){const t=Fe(),{control:r=t.control,name:n,defaultValue:i,disabled:l,exact:f}=e||{},y=b.useRef(n);y.current=n,be({disabled:l,subject:r._subjects.watch,next:p=>{cr(y.current,p.name,f)&&A($(fr(y.current,r._names,p.values||r._formValues,!1,i)))}});const[_,A]=b.useState(r._getWatch(n,i));return b.useEffect(()=>r._removeUnmounted()),_}function Tr(e){const t=Fe(),{name:r,control:n=t.control,shouldUnregister:i}=e,l=ur(n._names.array,r),f=Lr({control:n,name:r,defaultValue:c(n._formValues,r,c(n._defaultValues,r,e.defaultValue)),exact:!0}),y=Rr({control:n,name:r}),_=b.useRef(n.register(r,{...e.rules,value:f}));return b.useEffect(()=>{const A=(p,D)=>{const F=c(n._fields,p);F&&(F._f.mount=D)};return A(r,!0),()=>{const p=n._options.shouldUnregister||i;(l?p&&!n._stateFlags.action:p)?n.unregister(r):A(r,!1)}},[r,n,l,i]),{field:{name:r,value:f,onChange:b.useCallback(A=>_.current.onChange({target:{value:ar(A),name:r},type:ge.CHANGE}),[r]),onBlur:b.useCallback(()=>_.current.onBlur({target:{value:c(n._formValues,r),name:r},type:ge.BLUR}),[r,n]),ref:A=>{const p=c(n._fields,r);p&&A&&(p._f.ref={focus:()=>A.focus(),select:()=>A.select(),setCustomValidity:D=>A.setCustomValidity(D),reportValidity:()=>A.reportValidity()})}},formState:y,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(y.errors,r)},isDirty:{enumerable:!0,get:()=>!!c(y.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!c(y.touchedFields,r)},error:{enumerable:!0,get:()=>c(y.errors,r)}})}}const Gr=e=>e.render(Tr(e));var Ur=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},We=e=>/^\w*$/.test(e),dr=e=>ae(e.replace(/["|']|\]/g,"").split(/\.|\[/));function E(e,t,r){let n=-1;const i=We(t)?[t]:dr(t),l=i.length,f=l-1;for(;++n<l;){const y=i[n];let _=r;if(n!==f){const A=e[y];_=U(A)||Array.isArray(A)?A:isNaN(+i[n+1])?{}:[]}e[y]=_,e=e[y]}return e}const he=(e,t,r)=>{for(const n of r||Object.keys(e)){const i=c(e,n);if(i){const{_f:l,...f}=i;if(l&&t(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else U(f)&&he(f,t)}}};var X=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},De=(e,t,r={})=>r.shouldFocus||C(r.shouldFocus)?r.focusName||`${e}.${C(r.focusIndex)?t:r.focusIndex}.`:"",Ne=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),Ie=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),yr=(e,t,r)=>{const n=ae(c(e,r));return E(n,"root",t[r]),E(e,r,n),e},ie=e=>typeof e=="boolean",$e=e=>e.type==="file",ne=e=>typeof e=="function",_e=e=>{if(!qe)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ye=e=>J(e)||b.isValidElement(e),He=e=>e.type==="radio",Ae=e=>e instanceof RegExp;const Ze={value:!1,isValid:!1},er={value:!0,isValid:!0};var gr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!C(e[0].attributes.value)?C(e[0].value)||e[0].value===""?er:{value:e[0].value,isValid:!0}:er:Ze}return Ze};const rr={isValid:!1,value:null};var hr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,rr):rr;function tr(e,t,r="validate"){if(ye(e)||Array.isArray(e)&&e.every(ye)||ie(e)&&!e)return{type:r,message:ye(e)?e:"",ref:t}}var te=e=>U(e)&&!Ae(e)?e:{value:e,message:""},je=async(e,t,r,n,i)=>{const{ref:l,refs:f,required:y,maxLength:_,minLength:A,min:p,max:D,pattern:F,validate:x,name:j,valueAsNumber:ue,mount:re,disabled:le}=e._f;if(!re||le)return{};const B=f?f[0]:l,q=V=>{n&&B.reportValidity&&(B.setCustomValidity(ie(V)?"":V||""),B.reportValidity())},L={},m=He(l),v=fe(l),w=m||v,R=(ue||$e(l))&&C(l.value)&&C(t)||_e(l)&&l.value===""||t===""||Array.isArray(t)&&!t.length,M=Ur.bind(null,j,r,L),Y=(V,S,k,P=Q.maxLength,z=Q.minLength)=>{const G=V?S:k;L[j]={type:V?P:z,message:G,ref:l,...M(V?P:z,G)}};if(i?!Array.isArray(t)||!t.length:y&&(!w&&(R||I(t))||ie(t)&&!t||v&&!gr(f).isValid||m&&!hr(f).isValid)){const{value:V,message:S}=ye(y)?{value:!!y,message:y}:te(y);if(V&&(L[j]={type:Q.required,message:S,ref:B,...M(Q.required,S)},!r))return q(S),L}if(!R&&(!I(p)||!I(D))){let V,S;const k=te(D),P=te(p);if(!I(t)&&!isNaN(t)){const z=l.valueAsNumber||t&&+t;I(k.value)||(V=z>k.value),I(P.value)||(S=z<P.value)}else{const z=l.valueAsDate||new Date(t),G=de=>new Date(new Date().toDateString()+" "+de),oe=l.type=="time",Z=l.type=="week";J(k.value)&&t&&(V=oe?G(t)>G(k.value):Z?t>k.value:z>new Date(k.value)),J(P.value)&&t&&(S=oe?G(t)<G(P.value):Z?t<P.value:z<new Date(P.value))}if((V||S)&&(Y(!!V,k.message,P.message,Q.max,Q.min),!r))return q(L[j].message),L}if((_||A)&&!R&&(J(t)||i&&Array.isArray(t))){const V=te(_),S=te(A),k=!I(V.value)&&t.length>V.value,P=!I(S.value)&&t.length<S.value;if((k||P)&&(Y(k,V.message,S.message),!r))return q(L[j].message),L}if(F&&!R&&J(t)){const{value:V,message:S}=te(F);if(Ae(V)&&!t.match(V)&&(L[j]={type:Q.pattern,message:S,ref:l,...M(Q.pattern,S)},!r))return q(S),L}if(x){if(ne(x)){const V=await x(t),S=tr(V,B);if(S&&(L[j]={...S,...M(Q.validate,S.message)},!r))return q(S.message),L}else if(U(x)){let V={};for(const S in x){if(!W(V)&&!r)break;const k=tr(await x[S](t),B,S);k&&(V={...k,...M(S,k.message)},q(k.message),r&&(L[j]=V))}if(!W(V)&&(L[j]={ref:B,...V},!r))return L}}return q(!0),L};function ke(e,t){return[...e,...H(t)]}var Ee=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Ce(e,t,r){return[...e.slice(0,t),...H(r),...e.slice(t)]}var Re=(e,t,r)=>Array.isArray(e)?(C(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[];function Oe(e,t){return[...H(t),...H(e)]}function Mr(e,t){let r=0;const n=[...e];for(const i of t)n.splice(i-r,1),r++;return ae(n).length?n:[]}var Le=(e,t)=>C(t)?[]:Mr(e,H(t).sort((r,n)=>r-n)),Te=(e,t,r)=>{e[t]=[e[r],e[r]=e[t]][0]};function Br(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=C(e)?n++:e[t[n++]];return e}function Pr(e){for(const t in e)if(!C(e[t]))return!1;return!0}function N(e,t){const r=We(t)?[t]:dr(t),n=r.length==1?e:Br(e,r),i=r[r.length-1];let l;n&&delete n[i];for(let f=0;f<r.slice(0,-1).length;f++){let y=-1,_;const A=r.slice(0,-(f+1)),p=A.length-1;for(f>0&&(l=e);++y<A.length;){const D=A[y];_=_?_[D]:e[D],p===y&&(U(_)&&W(_)||Array.isArray(_)&&Pr(_))&&(l?delete l[D]:delete e[D]),l=_}}return e}var sr=(e,t,r)=>(e[t]=r,e);function zr(e){const t=Fe(),{control:r=t.control,name:n,keyName:i="id",shouldUnregister:l}=e,[f,y]=b.useState(r._getFieldArray(n)),_=b.useRef(r._getFieldArray(n).map(X)),A=b.useRef(f),p=b.useRef(n),D=b.useRef(!1);p.current=n,A.current=f,r._names.array.add(n),e.rules&&r.register(n,e.rules),be({next:({values:m,name:v})=>{if(v===p.current||!v){const w=c(m,p.current);Array.isArray(w)&&(y(w),_.current=w.map(X))}},subject:r._subjects.array});const F=b.useCallback(m=>{D.current=!0,r._updateFieldArray(n,m)},[r,n]),x=(m,v)=>{const w=H($(m)),R=ke(r._getFieldArray(n),w);r._names.focus=De(n,R.length-1,v),_.current=ke(_.current,w.map(X)),F(R),y(R),r._updateFieldArray(n,R,ke,{argA:Ee(m)})},j=(m,v)=>{const w=H($(m)),R=Oe(r._getFieldArray(n),w);r._names.focus=De(n,0,v),_.current=Oe(_.current,w.map(X)),F(R),y(R),r._updateFieldArray(n,R,Oe,{argA:Ee(m)})},ue=m=>{const v=Le(r._getFieldArray(n),m);_.current=Le(_.current,m),F(v),y(v),r._updateFieldArray(n,v,Le,{argA:m})},re=(m,v,w)=>{const R=H($(v)),M=Ce(r._getFieldArray(n),m,R);r._names.focus=De(n,m,w),_.current=Ce(_.current,m,R.map(X)),F(M),y(M),r._updateFieldArray(n,M,Ce,{argA:m,argB:Ee(v)})},le=(m,v)=>{const w=r._getFieldArray(n);Te(w,m,v),Te(_.current,m,v),F(w),y(w),r._updateFieldArray(n,w,Te,{argA:m,argB:v},!1)},B=(m,v)=>{const w=r._getFieldArray(n);Re(w,m,v),Re(_.current,m,v),F(w),y(w),r._updateFieldArray(n,w,Re,{argA:m,argB:v},!1)},q=(m,v)=>{const w=$(v),R=sr(r._getFieldArray(n),m,w);_.current=[...R].map((M,Y)=>!M||Y===m?X():_.current[Y]),F(R),y([...R]),r._updateFieldArray(n,R,sr,{argA:m,argB:w},!0,!1)},L=m=>{const v=H($(m));_.current=v.map(X),F([...v]),y([...v]),r._updateFieldArray(n,[...v],w=>w,{},!0,!1)};return b.useEffect(()=>{if(r._stateFlags.action=!1,Ie(n,r._names)&&r._subjects.state.next({}),D.current&&(!Ne(r._options.mode).isOnSubmit||r._formState.isSubmitted))if(r._options.resolver)r._executeSchema([n]).then(m=>{const v=c(m.errors,n),w=c(r._formState.errors,n);(w?!v&&w.type:v&&v.type)&&(v?E(r._formState.errors,n,v):N(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const m=c(r._fields,n);m&&m._f&&je(m,c(r._formValues,n),r._options.criteriaMode===K.all,r._options.shouldUseNativeValidation,!0).then(v=>!W(v)&&r._subjects.state.next({errors:yr(r._formState.errors,v,n)}))}r._subjects.watch.next({name:n,values:r._formValues}),r._names.focus&&he(r._fields,m=>!!m&&m.startsWith(r._names.focus||"")),r._names.focus="",r._proxyFormState.isValid&&r._updateValid()},[f,n,r]),b.useEffect(()=>(!c(r._formValues,n)&&r._updateFieldArray(n),()=>{(r._options.shouldUnregister||l)&&r.unregister(n)}),[n,r,i,l]),{swap:b.useCallback(le,[F,n,r]),move:b.useCallback(B,[F,n,r]),prepend:b.useCallback(j,[F,n,r]),append:b.useCallback(x,[F,n,r]),remove:b.useCallback(ue,[F,n,r]),insert:b.useCallback(re,[F,n,r]),update:b.useCallback(q,[F,n,r]),replace:b.useCallback(L,[F,n,r]),fields:b.useMemo(()=>f.map((m,v)=>({...m,[i]:_.current[v]||X()})),[f,i])}}function Ue(){let e=[];return{get observers(){return e},next:i=>{for(const l of e)l.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(l=>l!==i)}}),unsubscribe:()=>{e=[]}}}var me=e=>I(e)||!nr(e);function ee(e,t){if(me(e)||me(t))return e===t;if(se(e)&&se(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r){const l=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const f=t[i];if(se(l)&&se(f)||U(l)&&U(f)||Array.isArray(l)&&Array.isArray(f)?!ee(l,f):l!==f)return!1}}return!0}var _r=e=>e.type==="select-multiple",Nr=e=>He(e)||fe(e),Me=e=>_e(e)&&e.isConnected,Ar=e=>{for(const t in e)if(ne(e[t]))return!0;return!1};function ve(e,t={}){const r=Array.isArray(e);if(U(e)||r)for(const n in e)Array.isArray(e[n])||U(e[n])&&!Ar(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ve(e[n],t[n])):I(e[n])||(t[n]=!0);return t}function mr(e,t,r){const n=Array.isArray(e);if(U(e)||n)for(const i in e)Array.isArray(e[i])||U(e[i])&&!Ar(e[i])?C(t)||me(r[i])?r[i]=Array.isArray(e[i])?ve(e[i],[]):{...ve(e[i])}:mr(e[i],I(t)?{}:t[i],r[i]):ee(e[i],t[i])?delete r[i]:r[i]=!0;return r}var Be=(e,t)=>mr(e,t,ve(t)),vr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>C(e)?e:t?e===""?NaN:e&&+e:r&&J(e)?new Date(e):n?n(e):e;function Pe(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return $e(t)?t.files:He(t)?hr(e.refs).value:_r(t)?[...t.selectedOptions].map(({value:r})=>r):fe(t)?gr(e.refs).value:vr(C(t.value)?e.ref.value:t.value,e)}var Ir=(e,t,r,n)=>{const i={};for(const l of e){const f=c(t,l);f&&E(i,l,f._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},ce=e=>C(e)?e:Ae(e)?e.source:U(e)?Ae(e.value)?e.value.source:e.value:e,jr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ir(e,t,r){const n=c(e,r);if(n||We(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const l=i.join("."),f=c(t,l),y=c(e,l);if(f&&!Array.isArray(f)&&r!==l)return{name:r};if(y&&y.type)return{name:l,error:y};i.pop()}return{name:r}}var qr=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,Wr=(e,t)=>!ae(c(e,t)).length&&N(e,t);const $r={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function Hr(e={},t){let r={...$r,...e};const n=e.resetOptions&&e.resetOptions.keepDirtyValues;let i={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},l={},f=U(r.defaultValues)?$(r.defaultValues)||{}:{},y=r.shouldUnregister?{}:$(f),_={action:!1,mount:!1,watch:!1},A={mount:new Set,unMount:new Set,array:new Set,watch:new Set},p,D=0;const F={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={watch:Ue(),array:Ue(),state:Ue()},j=Ne(r.mode),ue=Ne(r.reValidateMode),re=r.criteriaMode===K.all,le=s=>a=>{clearTimeout(D),D=window.setTimeout(s,a)},B=async()=>{if(F.isValid){const s=r.resolver?W((await M()).errors):await V(l,!0);s!==i.isValid&&(i.isValid=s,x.state.next({isValid:s}))}},q=s=>F.isValidating&&x.state.next({isValidating:s}),L=(s,a=[],u,d,g=!0,o=!0)=>{if(d&&u){if(_.action=!0,o&&Array.isArray(c(l,s))){const h=u(c(l,s),d.argA,d.argB);g&&E(l,s,h)}if(o&&Array.isArray(c(i.errors,s))){const h=u(c(i.errors,s),d.argA,d.argB);g&&E(i.errors,s,h),Wr(i.errors,s)}if(F.touchedFields&&o&&Array.isArray(c(i.touchedFields,s))){const h=u(c(i.touchedFields,s),d.argA,d.argB);g&&E(i.touchedFields,s,h)}F.dirtyFields&&(i.dirtyFields=Be(f,y)),x.state.next({name:s,isDirty:k(s,a),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else E(y,s,a)},m=(s,a)=>{E(i.errors,s,a),x.state.next({errors:i.errors})},v=(s,a,u,d)=>{const g=c(l,s);if(g){const o=c(y,s,C(u)?c(f,s):u);C(o)||d&&d.defaultChecked||a?E(y,s,a?o:Pe(g._f)):G(s,o),_.mount&&B()}},w=(s,a,u,d,g)=>{let o=!1,h=!1;const T={name:s};if(!u||d){F.isDirty&&(h=i.isDirty,i.isDirty=T.isDirty=k(),o=h!==T.isDirty);const O=ee(c(f,s),a);h=c(i.dirtyFields,s),O?N(i.dirtyFields,s):E(i.dirtyFields,s,!0),T.dirtyFields=i.dirtyFields,o=o||F.dirtyFields&&h!==!O}if(u){const O=c(i.touchedFields,s);O||(E(i.touchedFields,s,u),T.touchedFields=i.touchedFields,o=o||F.touchedFields&&O!==u)}return o&&g&&x.state.next(T),o?T:{}},R=(s,a,u,d)=>{const g=c(i.errors,s),o=F.isValid&&ie(a)&&i.isValid!==a;if(e.delayError&&u?(p=le(()=>m(s,u)),p(e.delayError)):(clearTimeout(D),p=null,u?E(i.errors,s,u):N(i.errors,s)),(u?!ee(g,u):g)||!W(d)||o){const h={...d,...o&&ie(a)?{isValid:a}:{},errors:i.errors,name:s};i={...i,...h},x.state.next(h)}q(!1)},M=async s=>await r.resolver(y,r.context,Ir(s||A.mount,l,r.criteriaMode,r.shouldUseNativeValidation)),Y=async s=>{const{errors:a}=await M();if(s)for(const u of s){const d=c(a,u);d?E(i.errors,u,d):N(i.errors,u)}else i.errors=a;return a},V=async(s,a,u={valid:!0})=>{for(const d in s){const g=s[d];if(g){const{_f:o,...h}=g;if(o){const T=A.array.has(o.name),O=await je(g,c(y,o.name),re,r.shouldUseNativeValidation,T);if(O[o.name]&&(u.valid=!1,a))break;!a&&(c(O,o.name)?T?yr(i.errors,O,o.name):E(i.errors,o.name,O[o.name]):N(i.errors,o.name))}h&&await V(h,a,u)}}return u.valid},S=()=>{for(const s of A.unMount){const a=c(l,s);a&&(a._f.refs?a._f.refs.every(u=>!Me(u)):!Me(a._f.ref))&&Ve(s)}A.unMount=new Set},k=(s,a)=>(s&&a&&E(y,s,a),!ee(Ke(),f)),P=(s,a,u)=>fr(s,A,{..._.mount?y:C(a)?f:J(s)?{[s]:a}:a},u,a),z=s=>ae(c(_.mount?y:f,s,e.shouldUnregister?c(f,s,[]):[])),G=(s,a,u={})=>{const d=c(l,s);let g=a;if(d){const o=d._f;o&&(!o.disabled&&E(y,s,vr(a,o)),g=_e(o.ref)&&I(a)?"":a,_r(o.ref)?[...o.ref.options].forEach(h=>h.selected=g.includes(h.value)):o.refs?fe(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(g)?!!g.find(T=>T===h.value):g===h.value)):o.refs[0]&&(o.refs[0].checked=!!g):o.refs.forEach(h=>h.checked=h.value===g):$e(o.ref)?o.ref.value="":(o.ref.value=g,o.ref.type||x.watch.next({name:s})))}(u.shouldDirty||u.shouldTouch)&&w(s,g,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&xe(s)},oe=(s,a,u)=>{for(const d in a){const g=a[d],o=`${s}.${d}`,h=c(l,o);(A.array.has(s)||!me(g)||h&&!h._f)&&!se(g)?oe(o,g,u):G(o,g,u)}},Z=(s,a,u={})=>{const d=c(l,s),g=A.array.has(s),o=$(a);E(y,s,o),g?(x.array.next({name:s,values:y}),(F.isDirty||F.dirtyFields)&&u.shouldDirty&&(i.dirtyFields=Be(f,y),x.state.next({name:s,dirtyFields:i.dirtyFields,isDirty:k(s,o)}))):d&&!d._f&&!I(o)?oe(s,o,u):G(s,o,u),Ie(s,A)&&x.state.next({}),x.watch.next({name:s}),!_.mount&&t()},de=async s=>{const a=s.target;let u=a.name;const d=c(l,u),g=()=>a.type?Pe(d._f):ar(s);if(d){let o,h;const T=g(),O=s.type===ge.BLUR||s.type===ge.FOCUS_OUT,Sr=!jr(d._f)&&!r.resolver&&!c(i.errors,u)&&!d._f.deps||qr(O,c(i.touchedFields,u),i.isSubmitted,ue,j),pe=Ie(u,A,O);E(y,u,T),O?(d._f.onBlur&&d._f.onBlur(s),p&&p(0)):d._f.onChange&&d._f.onChange(s);const Se=w(u,T,O,!1),Dr=!W(Se)||pe;if(!O&&x.watch.next({name:u,type:s.type}),Sr)return F.isValid&&B(),Dr&&x.state.next({name:u,...pe?{}:Se});if(!O&&pe&&x.state.next({}),q(!0),r.resolver){const{errors:Xe}=await M([u]),kr=ir(i.errors,l,u),Ye=ir(Xe,l,kr.name||u);o=Ye.error,u=Ye.name,h=W(Xe)}else o=(await je(d,c(y,u),re,r.shouldUseNativeValidation))[u],o?h=!1:F.isValid&&(h=await V(l,!0));d._f.deps&&xe(d._f.deps),R(u,h,o,Se)}},xe=async(s,a={})=>{let u,d;const g=H(s);if(q(!0),r.resolver){const o=await Y(C(s)?s:g);u=W(o),d=s?!g.some(h=>c(o,h)):u}else s?(d=(await Promise.all(g.map(async o=>{const h=c(l,o);return await V(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!d&&!i.isValid)&&B()):d=u=await V(l);return x.state.next({...!J(s)||F.isValid&&u!==i.isValid?{}:{name:s},...r.resolver||!s?{isValid:u}:{},errors:i.errors,isValidating:!1}),a.shouldFocus&&!d&&he(l,o=>o&&c(i.errors,o),s?g:A.mount),d},Ke=s=>{const a={...f,..._.mount?y:{}};return C(s)?a:J(s)?c(a,s):s.map(u=>c(a,u))},Ge=(s,a)=>({invalid:!!c((a||i).errors,s),isDirty:!!c((a||i).dirtyFields,s),isTouched:!!c((a||i).touchedFields,s),error:c((a||i).errors,s)}),Fr=s=>{s?H(s).forEach(a=>N(i.errors,a)):i.errors={},x.state.next({errors:i.errors})},br=(s,a,u)=>{const d=(c(l,s,{_f:{}})._f||{}).ref;E(i.errors,s,{...a,ref:d}),x.state.next({name:s,errors:i.errors,isValid:!1}),u&&u.shouldFocus&&d&&d.focus&&d.focus()},xr=(s,a)=>ne(s)?x.watch.subscribe({next:u=>s(P(void 0,a),u)}):P(s,a,!0),Ve=(s,a={})=>{for(const u of s?H(s):A.mount)A.mount.delete(u),A.array.delete(u),c(l,u)&&(a.keepValue||(N(l,u),N(y,u)),!a.keepError&&N(i.errors,u),!a.keepDirty&&N(i.dirtyFields,u),!a.keepTouched&&N(i.touchedFields,u),!r.shouldUnregister&&!a.keepDefaultValue&&N(f,u));x.watch.next({}),x.state.next({...i,...a.keepDirty?{isDirty:k()}:{}}),!a.keepIsValid&&B()},we=(s,a={})=>{let u=c(l,s);const d=ie(a.disabled);return E(l,s,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:s}},name:s,mount:!0,...a}}),A.mount.add(s),u?d&&E(y,s,a.disabled?void 0:c(y,s,Pe(u._f))):v(s,!0,a.value),{...d?{disabled:a.disabled}:{},...r.shouldUseNativeValidation?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:s,onChange:de,onBlur:de,ref:g=>{if(g){we(s,a),u=c(l,s);const o=C(g.value)&&g.querySelectorAll&&g.querySelectorAll("input,select,textarea")[0]||g,h=Nr(o),T=u._f.refs||[];if(h?T.find(O=>O===o):o===u._f.ref)return;E(l,s,{_f:{...u._f,...h?{refs:[...T.filter(Me),o,...Array.isArray(c(f,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),v(s,!1,void 0,o)}else u=c(l,s,{}),u._f&&(u._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(ur(A.array,s)&&_.action)&&A.unMount.add(s)}}},ze=()=>r.shouldFocusError&&he(l,s=>s&&c(i.errors,s),A.mount),Vr=(s,a)=>async u=>{u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let d=!0,g=$(y);x.state.next({isSubmitting:!0});try{if(r.resolver){const{errors:o,values:h}=await M();i.errors=o,g=h}else await V(l);W(i.errors)?(x.state.next({errors:{},isSubmitting:!0}),await s(g,u)):(a&&await a({...i.errors},u),ze())}catch(o){throw d=!1,o}finally{i.isSubmitted=!0,x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:W(i.errors)&&d,submitCount:i.submitCount+1,errors:i.errors})}},wr=(s,a={})=>{c(l,s)&&(C(a.defaultValue)?Z(s,c(f,s)):(Z(s,a.defaultValue),E(f,s,a.defaultValue)),a.keepTouched||N(i.touchedFields,s),a.keepDirty||(N(i.dirtyFields,s),i.isDirty=a.defaultValue?k(s,c(f,s)):k()),a.keepError||(N(i.errors,s),F.isValid&&B()),x.state.next({...i}))},Je=(s,a={})=>{const u=s||f,d=$(u),g=s&&!W(s)?d:f;if(a.keepDefaultValues||(f=u),!a.keepValues){if(a.keepDirtyValues||n)for(const o of A.mount)c(i.dirtyFields,o)?E(g,o,c(y,o)):Z(o,c(g,o));else{if(qe&&C(s))for(const o of A.mount){const h=c(l,o);if(h&&h._f){const T=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;if(_e(T)){const O=T.closest("form");if(O){O.reset();break}}}}l={}}y=e.shouldUnregister?a.keepDefaultValues?$(f):{}:d,x.array.next({values:g}),x.watch.next({values:g})}A={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!_.mount&&t(),_.mount=!F.isValid||!!a.keepIsValid,_.watch=!!e.shouldUnregister,x.state.next({submitCount:a.keepSubmitCount?i.submitCount:0,isDirty:a.keepDirty||a.keepDirtyValues?i.isDirty:!!(a.keepDefaultValues&&!ee(s,f)),isSubmitted:a.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:a.keepDirty||a.keepDirtyValues?i.dirtyFields:a.keepDefaultValues&&s?Be(f,s):{},touchedFields:a.keepTouched?i.touchedFields:{},errors:a.keepErrors?i.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Qe=(s,a)=>Je(ne(s)?s(y):s,a),pr=(s,a={})=>{const u=c(l,s),d=u&&u._f;if(d){const g=d.refs?d.refs[0]:d.ref;g.focus&&(g.focus(),a.shouldSelect&&g.select())}};return ne(r.defaultValues)&&r.defaultValues().then(s=>{Qe(s,r.resetOptions),x.state.next({isLoading:!1})}),{control:{register:we,unregister:Ve,getFieldState:Ge,_executeSchema:M,_focusError:ze,_getWatch:P,_getDirty:k,_updateValid:B,_removeUnmounted:S,_updateFieldArray:L,_getFieldArray:z,_reset:Je,_subjects:x,_proxyFormState:F,get _fields(){return l},get _formValues(){return y},get _stateFlags(){return _},set _stateFlags(s){_=s},get _defaultValues(){return f},get _names(){return A},set _names(s){A=s},get _formState(){return i},set _formState(s){i=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:xe,register:we,handleSubmit:Vr,watch:xr,setValue:Z,getValues:Ke,reset:Qe,resetField:wr,clearErrors:Fr,unregister:Ve,setError:br,setFocus:pr,getFieldState:Ge}}function Jr(e={}){const t=b.useRef(),[r,n]=b.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:ne(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Hr(e,()=>n(l=>({...l}))),formState:r});const i=t.current.control;return i._options=e,be({subject:i._subjects.state,next:l=>{or(l,i._proxyFormState,!0)&&(i._formState={...i._formState,...l},n({...i._formState}))}}),b.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),b.useEffect(()=>{e.values&&!ee(e.values,i._defaultValues)&&i._reset(e.values,i._options.resetOptions)},[e.values,i]),b.useEffect(()=>{r.submitCount&&i._focusError()},[i,r.submitCount]),t.current.formState=lr(r,i),t.current}export{Gr as C,Ur as a,zr as b,c as g,E as s,Jr as u};
